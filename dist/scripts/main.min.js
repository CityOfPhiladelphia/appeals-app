var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,r){(n||!hasProp(e,r))&&(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[r]=t:(e[r]||(e[r]={}),mixin(e[r],t,n,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var r=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=i,n&&(r.originalError=n),r}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1==t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,i){var r,o,a,s,l,c,u,p,d,h,f,g,m=n&&n.split("/"),v=E.map,b=v&&v["*"];if(e&&(e=e.split("/"),u=e.length-1,E.nodeIdCompat&&jsSuffixRegExp.test(e[u])&&(e[u]=e[u].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&m&&(g=m.slice(0,m.length-1),e=g.concat(e)),t(e),e=e.join("/")),i&&v&&(m||b)){a=e.split("/");e:for(s=a.length;s>0;s-=1){if(c=a.slice(0,s).join("/"),m)for(l=m.length;l>0;l-=1)if(o=getOwn(v,m.slice(0,l).join("/")),o&&(o=getOwn(o,c))){p=o,d=s;break e}!h&&b&&getOwn(b,c)&&(h=getOwn(b,c),f=s)}!p&&h&&(p=h,d=f),p&&(a.splice(0,d,p),e=a.join("/"))}return r=getOwn(E.pkgs,e),r?r:e}function i(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===w.contextName?(t.parentNode.removeChild(t),!0):void 0})}function r(e){var t=getOwn(E.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),w.require.undef(e),w.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,i,r){var a,s,l,c,u=null,p=t?t.name:null,d=e,h=!0,f="";return e||(h=!1,e="_@r"+(O+=1)),c=o(e),u=c[0],e=c[1],u&&(u=n(u,p,r),s=getOwn(P,u)),e&&(u?f=s&&s.normalize?s.normalize(e,function(e){return n(e,p,r)}):-1===e.indexOf("!")?n(e,p,r):e:(f=n(e,p,r),c=o(f),u=c[0],f=c[1],i=!0,a=w.nameToUrl(f))),l=!u||s||i?"":"_unnormalized"+(C+=1),{prefix:u,name:f,parentMap:t,unnormalized:!!l,url:a,originalName:d,isDefine:h,id:(u?u+"!"+f:f)+l}}function s(e){var t=e.id,n=getOwn(A,t);return n||(n=A[t]=new w.Module(e)),n}function l(e,t,n){var i=e.id,r=getOwn(A,i);!hasProp(P,i)||r&&!r.defineEmitComplete?(r=s(e),r.error&&"error"===t?n(r.error):r.on(t,n)):"defined"===t&&n(P[i])}function c(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(A,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function u(){globalDefQueue.length&&(apsp.apply(q,[q.length,0].concat(globalDefQueue)),globalDefQueue=[])}function p(e){delete A[e],delete S[e]}function d(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,each(e.depMaps,function(i,r){var o=i.id,a=getOwn(A,o);!a||e.depMatched[r]||n[o]||(getOwn(t,o)?(e.defineDep(r,P[o]),e.check()):d(a,t,n))}),n[i]=!0)}function h(){var e,t,n=1e3*E.waitSeconds,o=n&&w.startTime+n<(new Date).getTime(),a=[],s=[],l=!1,u=!0;if(!b){if(b=!0,eachProp(S,function(e){var n=e.map,c=n.id;if(e.enabled&&(n.isDefine||s.push(e),!e.error))if(!e.inited&&o)r(c)?(t=!0,l=!0):(a.push(c),i(c));else if(!e.inited&&e.fetched&&n.isDefine&&(l=!0,!n.prefix))return u=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=w.contextName,c(e);u&&each(s,function(e){d(e,{},{})}),o&&!t||!l||!isBrowser&&!isWebWorker||D||(D=setTimeout(function(){D=0,h()},50)),b=!1}}function f(e){hasProp(P,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function g(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function m(e){var t=e.currentTarget||e.srcElement;return g(t,w.onScriptLoad,"load","onreadystatechange"),g(t,w.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(u();q.length;){if(e=q.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));f(e)}}var b,y,w,x,D,E={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},A={},S={},T={},q=[],P={},N={},k={},O=1,C=1;return x={require:function(e){return e.require?e.require:e.require=w.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?P[e.map.id]=e.exports:e.exports=P[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(E.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},y=function(e){this.events=getOwn(T,e.id)||{},this.map=e,this.shim=getOwn(E.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var e=this.map;return this.shim?void w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;N[e]||(N[e]=!0,w.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,i=this.depExports,r=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{r=w.execCb(n,o,i,r)}catch(a){e=a}else r=w.execCb(n,o,i,r);if(this.map.isDefine&&void 0===r&&(t=this.module,t?r=t.exports:this.usingExports&&(r=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else r=o;this.exports=r,this.map.isDefine&&!this.ignore&&(P[n]=r,req.onResourceLoad&&req.onResourceLoad(w,this.map,this.depMaps)),p(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=a(e.prefix);this.depMaps.push(i),l(i,"defined",bind(this,function(i){var r,o,u,d=getOwn(k,this.map.id),h=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,g=w.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(h=i.normalize(h,function(e){return n(e,f,!0)})||""),o=a(e.prefix+"!"+h,this.map.parentMap),l(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),u=getOwn(A,o.id),void(u&&(this.depMaps.push(o),this.events.error&&u.on("error",bind(this,function(e){this.emit("error",e)})),u.enable()))):d?(this.map.url=w.nameToUrl(d),void this.load()):(r=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),r.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(A,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&p(e.map.id)}),c(e)}),r.fromText=bind(this,function(n,i){var o=e.name,l=a(o),u=useInteractive;i&&(n=i),u&&(useInteractive=!1),s(l),hasProp(E.config,t)&&(E.config[o]=E.config[t]);try{req.exec(n)}catch(p){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+p,p,[t]))}u&&(useInteractive=!0),this.depMaps.push(l),w.completeLoad(o),g([o],r)}),void i.load(e.name,g,r,E))})),w.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){S[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,i,r;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,r=getOwn(x,e.id))return void(this.depExports[t]=r(this));this.depCount+=1,l(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&l(e,"error",bind(this,this.errback))}n=e.id,i=A[n],hasProp(x,n)||!i||i.enabled||w.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(A,e.id);t&&!t.enabled&&w.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},w={config:E,contextName:e,registry:A,defined:P,urlFetched:N,defQueue:q,Module:y,makeModuleMap:a,nextTick:req.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=E.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(E[t]||(E[t]={}),mixin(E[t],e,!0,!0)):E[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(k[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=w.makeShimExports(e)),t[n]=e}),E.shim=t),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(E.paths[n]=e.location),E.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(A,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t))}),(e.deps||e.callback)&&w.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,r){function o(n,i,l){var u,p,d;return r.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof n?isFunction(i)?c(makeError("requireargs","Invalid require call"),l):t&&hasProp(x,n)?x[n](A[t.id]):req.get?req.get(w,n,t,o):(p=a(n,t,!1,!0),u=p.id,hasProp(P,u)?P[u]:c(makeError("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),w.nextTick(function(){v(),d=s(a(null,t)),d.skipMap=r.skipMap,d.init(n,i,l,{enabled:!0}),h()}),o)}return r=r||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var i,r=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return-1!==r&&(!a||r>1)&&(i=e.substring(r,e.length),e=e.substring(0,r)),w.nameToUrl(n(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(P,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(P,e)||hasProp(A,e)}}),t||(o.undef=function(e){u();var n=a(e,t,!0),r=getOwn(A,e);i(e),delete P[e],delete N[n.url],delete T[e],eachReverse(q,function(t,n){t[0]===e&&q.splice(n,1)}),r&&(r.events.defined&&(T[e]=r.events),p(e))}),o},enable:function(e){var t=getOwn(A,e.id);t&&s(e).enable()},completeLoad:function(e){var t,n,i,o=getOwn(E.shim,e)||{},a=o.exports;for(u();q.length;){if(n=q.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);f(n)}if(i=getOwn(A,e),!t&&!hasProp(P,e)&&i&&!i.inited){if(!(!E.enforceDefine||a&&getGlobal(a)))return r(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));f([e,o.deps||[],o.exportsFn])}h()},nameToUrl:function(e,t,n){var i,r,o,a,s,l,c,u=getOwn(E.pkgs,e);if(u&&(e=u),c=getOwn(k,e))return w.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(i=E.paths,r=e.split("/"),o=r.length;o>0;o-=1)if(a=r.slice(0,o).join("/"),l=getOwn(i,a)){isArray(l)&&(l=l[0]),r.splice(0,o,l);break}s=r.join("/"),s+=t||(/^data\:|\?/.test(s)||n?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":E.baseUrl)+s}return E.urlArgs?s+((-1===s.indexOf("?")?"?":"&")+E.urlArgs):s},load:function(e,t){req.load(w,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=m(e);w.completeLoad(t.id)}},onScriptError:function(e){var t=m(e);return r(t.id)?void 0:c(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},w.require=w.makeRequire(),w}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.15",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var r,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=i):e=[]),o&&o.context&&(a=o.context),r=getOwn(contexts,a),r||(r=contexts[a]=req.s.newContext(a)),o&&r.configure(o),r.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},req.load=function(e,t,n){var i,r=e&&e.config||{};if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript(),i&&(e||(e=i.getAttribute("data-requiremodule")),r=contexts[i.getAttribute("data-requirecontext")])),(r?r.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("requireLib",function(){}),define("config",["jquery","underscore"],function(){var e={};return e.regionMappings={cd:{fullName:"Council District",apiRoot:"http://gis.phila.gov/arcgis/rest/services/PhilaGov/ServiceAreas/MapServer/2",field:"DISTRICT"},rco:{fullName:"Registered Community Organization",apiRoot:"http://gis.phila.gov/arcgis/rest/services/PhilaGov/RCO/MapServer/0",field:"ORGANIZATION_NAME"},planning:{fullName:"Planning District",apiRoot:"http://gis.phila.gov/arcgis/rest/services/PhilaGov/ServiceAreas/MapServer/20",field:"DIST_NAME"}},e.rcoList={url:"http://gis.phila.gov/arcgis/rest/services/PhilaGov/RCO/MapServer/0/query?where=1%3D1&outFields=ORGANIZATION_NAME&returnGeometry=true&returnIdsOnly=false&returnCountOnly=false&orderByFields=ORGANIZATION_NAME&returnZ=false&returnM=false&returnDistinctValues=false&f=pjson"},e.basemap={basemap:"http://tiles.arcgis.com/tiles/fLeGjb7u4uXqeF9q/arcgis/rest/services/CityBasemap/MapServer/tile/{z}/{y}/{x}",labels:"http://tiles.arcgis.com/tiles/fLeGjb7u4uXqeF9q/arcgis/rest/services/CityBasemap_Labels/MapServer/tile/{z}/{y}/{x}"},e.appeal={url:"http://gis.phila.gov/arcgis/rest/services/PhilaGov/Construction/MapServer/5/query?f=json&returnIdsOnly=false&returnCountOnly=false&outFields=VIOLATION_ADDRESS,TYPE,APPEAL_NUM,PERMIT_NO,GROUNDS,PRIMARY_APPLICANT,DATE_SCHEDULED,APPEAL_KEY&&where=APPEAL_NUM='<%= appealNum %>'&outSR=4326&returnGeometry=true"},e.request={params:{f:"json",orderByFields:"DATE_SCHEDULED",outFields:"VIOLATION_ADDRESS,TYPE,APPEAL_NUM,PERMIT_NO,GROUNDS,PRIMARY_APPLICANT,DATE_SCHEDULED,APPEAL_KEY",outSR:4326,returnGeometry:!0}},e.defaults={monthsAhead:6},e.history={court:"http://api.phila.gov/li/v1/zbacourtdetails?$filter=appeal_id eq <%= appealId %>&$format=json",decision:"http://api.phila.gov/li/v1/zbahearingdecisions?$filter=appeal_id eq <%= appealId %>&$format=json"},e}),define("util",["jquery","underscore","config","nprogress"],function(e,t,n,i){var r={};return r.liDateRegEx=/\/Date\(([0-9]+)\)\//,r.loading=function(e){void 0!==e&&e?i.start():i.done()},r.scrollToTop=function(){e(window).scrollTop(0)},r.fullDate=function(e){return new Date(e.split("-")[0],e.split("-")[1]-1,e.split("-")[2])},r.queryableDate=function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},r.friendlyDate=function(e){if(e instanceof Date){var t=new Date(e);return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()}var n=e.split("-");return n[1]+"/"+n[2]+"/"+n[0]},r.friendlyTime=function(e){var t=new Date(e.setHours(e.getHours()+4)),n=t.getHours()<13?"AM":"PM",i=t.getHours()>12?t.getHours()-12:t.getHours(),r=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();return i+":"+r+" "+n},r.friendlyLIDate=function(e){var t=parseInt(this.liDateRegEx.exec(e)[1],10);return this.friendlyDate(new Date(t))},r.formatFeature=function(e){var t=e.attributes;return t.lat=e.geometry.y,t.lng=e.geometry.x,t.TIME_SCHEDULED=this.friendlyTime(new Date(t.DATE_SCHEDULED)),t.DATE_SCHEDULED=this.friendlyDate(new Date(t.DATE_SCHEDULED)),t},r.formatPolygon=function(e){var t=e.attributes;return t.polygon=e.geometry,t},r.friendlyRegionType=function(e){return""!==e?n.regionMappings[e].fullName:void 0},r.setEndDate=function(e){var t=this.fullDate(e);return this.queryableDate(new Date(new Date(t).setMonth(t.getMonth()+n.defaults.monthsAhead)))},r}),define("text",["module"],function(e){var t,n,i,r,o,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,u=c&&location.protocol&&location.protocol.replace(/\:/,""),p=c&&location.hostname,d=c&&(location.port||void 0),h={},f=e.config&&e.config()||{};return t={version:"2.0.13",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=a[t];try{e=new ActiveXObject(n)}catch(i){}if(e){a=[n];break}}return e},parseName:function(e){var t,n,i,r=!1,o=e.lastIndexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!a||o>1)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,i=n||t,o=i.indexOf("!"),-1!==o&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,r){var o,a,s,l=t.xdRegExp.exec(e);return l?(o=l[2],a=l[3],a=a.split(":"),s=a[1],a=a[0],!(o&&o!==n||a&&a.toLowerCase()!==i.toLowerCase()||(s||a)&&s!==r)):!0},finishLoad:function(e,n,i,r){i=n?t.strip(i):i,f.isBuild&&(h[e]=i),r(i)},load:function(e,n,i,r){if(r&&r.isBuild&&!r.inlineText)return void i();f.isBuild=r&&r.isBuild;var o=t.parseName(e),a=o.moduleName+(o.ext?"."+o.ext:""),s=n.toUrl(a),l=f.useXhr||t.useXhr;return 0===s.indexOf("empty:")?void i():void(!c||l(s,u,p,d)?t.get(s,function(n){t.finishLoad(e,o.strip,n,i)},function(e){i.error&&i.error(e)}):n([a],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)}))},write:function(e,n,i){if(h.hasOwnProperty(n)){var r=t.jsEscape(h[n]);i.asModule(e+"!"+n,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,n,i,r,o){var a=t.parseName(n),s=a.ext?"."+a.ext:"",l=a.moduleName+s,c=i.toUrl(a.moduleName+s)+".js";t.load(l,i,function(){var n=function(e){return r(c,e)};n.asModule=function(e,t){return r.asModule(e,c,t)},t.write(e,l,n,o)},o)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var r=n.readFileSync(e,"utf8");"ï»¿"===r[0]&&(r=r.substring(1)),t(r)}catch(o){i&&i(o)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,i,r){var o,a=t.createXhr();if(a.open("GET",e,!0),r)for(o in r)r.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),r[o]);f.onXhr&&f.onXhr(a,e),a.onreadystatechange=function(){var t,r;4===a.readyState&&(t=a.status||0,t>399&&600>t?(r=new Error(e+" HTTP status: "+t),r.xhr=a,i&&i(r)):n(a.responseText),f.onXhrComplete&&f.onXhrComplete(a,e))},a.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,r="utf-8",o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),l="";try{for(n=new java.lang.StringBuffer,i=s.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=s.readLine());)n.append(a),n.append(i);l=String(n.toString())}finally{s.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,r=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,a,s,l={};o&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),n.init(s,1,0,!1),a=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),a.init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),l),a.close(),n.close(),t(l.value)}catch(c){throw new Error((s&&s.path||"")+": "+c)}}),t}),define("text!templates/appeal.html",[],function(){return"<td><%= DATE_SCHEDULED %></td>\n<td><%= TIME_SCHEDULED %></td>\n<td><%= VIOLATION_ADDRESS %></td>\n<td><%= APPEAL_NUM %></td>"}),define("models/current-appeal",["underscore","backbone","../util","../config"],function(e,t,n,i){var r=t.Model.extend({defaults:{appealNum:0},fetchHistory:function(){e.template(i.history.decision,this.toJSON())},url:function(){return e.template(i.appeal.url,{appealNum:this.get("appealNum")})},parse:function(e){if(e.features.length<1)return{appealNum:0};var t=n.formatFeature(e.features[0]);return t}});return new r}),define("views/appeal",["jquery","underscore","backbone","text!templates/appeal.html","../models/current-appeal"],function(e,t,n,i,r){var o=n.View.extend({template:t.template(i),tagName:"tr",className:"appeal-row",initialize:function(e){this.model=e.model,this.render()},events:{click:"showAppealDetails"},showAppealDetails:function(e){e.stopPropagation();var t=this.model.get("APPEAL_NUM");r.set("appealNum",t),r.set(this.model.toJSON()),n.history.navigate("/appeals/"+this.model.get("APPEAL_NUM"),{trigger:!0})},close:function(){this.undelegateEvents(),this.remove(),this.unbind()},render:function(){return this.delegateEvents(),this.$el.html(this.template(this.model.toJSON())),this}});return o}),define("text!templates/summary.html",[],function(){return'<h4><center>\n	There are <%= count %> appeals from <%= startDate %> to <%= endDate %>\n	<% if (typeof(regionType) !== "undefined") { %>\n		for <%= regionType %> <%= regionValue %>\n	<% } %>\n</center></h4>'}),define("views/summary",["jquery","underscore","backbone","text!templates/summary.html"],function(e,t,n,i){var r=n.View.extend({template:t.template(i),render:function(e){return this.$el.html(this.template(e)),this.el}});return r}),define("text!templates/home.html",[],function(){return'<p><a href="http://www.phila.gov/Pages/default.aspx">Phila</a> > <a href="http://www.phila.gov/li/Pages/default.aspx">L & I</a> > <strong>Zoning Appeals</strong></p>\n  <h1>Zoning Appeals</h1>\n  <div class="row">\n    <div class="col-md-4 appeal-search">\n      <div class="panel panel-default search-panel">\n        <div class="panel-body search-body">\n          <label for="RegionPicker"><h4><i class="fa fa-map-marker"></i> Region</h4></label><br />\n          <select class="selectpicker region-picker" title="Select a region..." data-live-search="true">\n          	<option value="all" selected="selected">All regions</option>\n            <optgroup label="Council District">\n              <option value="cd:1">Council District 1</option>\n              <option value="cd:2">Council District 2</option>\n              <option value="cd:3">Council District 3</option>\n              <option value="cd:4">Council District 4</option>\n              <option value="cd:5">Council District 5</option>\n              <option value="cd:6">Council District 6</option>\n              <option value="cd:7">Council District 7</option>\n              <option value="cd:8">Council District 8</option>\n              <option value="cd:9">Council District 9</option>\n              <option value="cd:10">Council District 10</option>\n            </optgroup>\n            <optgroup label="Planning District">\n              <option value="planning:Central">Central</option>\n              <option value="planning:Central Northeast">Central Northeast</option>\n              <option value="planning:Lower Far Northeast">Lower Far Northeast</option>\n              <option value="planning:Lower North">Lower North</option>\n              <option value="planning:Lower Northeast">Lower Northeast</option>\n              <option value="planning:Lower Northwest">Lower Northwest</option>\n              <option value="planning:Lower South">Lower South</option>\n              <option value="planning:Lower Southwest">Lower Southwest</option>\n              <option value="planning:North">North</option>\n              <option value="planning:North Delaware">North Delaware</option>\n              <option value="planning:River Wards">River Wards</option>\n              <option value="planning:South">South</option>           \n              <option value="planning:University/Southwest">University/Southwest</option>\n              <option value="planning:Upper Far Northeast">Upper Far Northeast</option>\n              <option value="planning:Upper North">Upper North</option>\n              <option value="planning:Upper Northwest">Upper Northwest</option>           \n              <option value="planning:West">West</option>\n              <option value="planning:West Park">West Park</option>              \n            </optgroup>\n            <% if (typeof(rcos) !== \'undefined\') { %>\n            <optgroup label="RCO">\n            	<% _.each(rcos, function(rco) { %>\n            		<option value="rco:<%= rco.ORGANIZATION_NAME %>"><%= rco.ORGANIZATION_NAME %></option>\n            	<% }); %>\n            </optgroup>\n            <% } %>\n          </select>\n          <br />\n          <label for="DatePicker"><h4><i class="fa fa-calendar"></i> Date</h4></label><br />\n          <div class="input-daterange input-group" id="datepicker">\n    				<input type="text" class="input-sm form-control start-date" name="start" />\n    				<span class="input-group-addon">to</span>\n    				<input type="text" class="input-sm form-control end-date" name="end" />\n					</div>\n        </div>\n      </div>\n    </div>\n    <div class="results col-md-8">\n    	<div class="well" id="results-summary"></div>\n      <table class="table table-striped appeals-table">\n        <th>Date</th>\n        <th>Time (EST)</th>\n        <th>Address</th>\n        <th>Appeal #</th>\n      </table>\n      <button type="button" class="btn btn-primary btn-block btn-more">More</button>\n    </div>\n  </div>\n'}),define("models/request",["underscore","backbone","../config"],function(e,t,n){var i=t.Model.extend({defaults:{regionType:"",regionValue:"",geometry:""},url:function(){var e=n.regionMappings[this.get("regionType")];return[e.apiRoot,"/query?where=",e.field,"='",this.get("regionValue"),"'&geometryType=esriGeometryEnvelope&spatialRel=esriSpatialRelIntersects&returnGeometry=true&outSR=2272&returnIdsOnly=false&returnCountOnly=false&returnZ=false&returnM=false&returnDistinctValues=false&f=json"].join("")},parse:function(e){return{geometry:e.features[0].geometry}}});return new i}),define("models/appeal",["underscore","backbone"],function(e,t){var n=t.Model.extend();return n}),define("collections/appeals",["underscore","backbone","../util","models/appeal","backbonePageable"],function(e,t,n,i){var r=t.PageableCollection.extend({model:i,mode:"client",url:"http://gis.phila.gov/arcgis/rest/services/PhilaGov/Construction/MapServer/5/query",parse:function(t){return e.map(t.features,function(e){return n.formatFeature(e),e.attributes})}});return r}),define("models/rco",["underscore","backbone"],function(e,t){var n=t.Model.extend();return n}),define("collections/rcos",["underscore","backbone","../util","../config","models/rco"],function(e,t,n,i,r){var o=t.Collection.extend({model:r,url:i.rcoList.url,parse:function(t){return e.map(t.features,function(e){return n.formatPolygon(e),e.attributes})}});return new o}),define("views/home",["jquery","underscore","backbone","../util","../config","../views/appeal","../views/summary","text!templates/home.html","../models/request","../collections/appeals","../collections/rcos"],function(e,t,n,i,r,o,a,s,l,c,u){var p=n.View.extend({template:t.template(s),initialize:function(e){this.collection=new c({mode:"client"}),this.summaryView=new a,this.listenTo(this.collection.fullCollection,"reset",this.resetAppeals),this.listenTo(this.collection,"reset",this.checkPageCount),this.listenTo(this.collection,"request",function(){i.loading(!0)
}),this.listenTo(this.collection,"sync",function(){i.loading(!1)}),this.listenTo(this.collection,"error",function(){i.loading(!1)}),this.page=1;var t=e||{},n=t.startDate||i.queryableDate(new Date),r=t.endDate||i.setEndDate(n),o=t.regionType||"",s=t.regionValue||"";l.set("startDate",n),l.set("endDate",r),l.set("regionType",o),l.set("regionValue",s),this.listenTo(l,"change:geometry",this.fetchData),this.views=[],""!==l.get("regionType")&&""!==l.get("regionValue")&&""!==l.get("geometry")&&this.fetchData(),""===l.get("regionType")&&""===l.get("regionValue")&&this.fetchData()},events:{"click .btn-more":"paginate","change .region-picker":"filterByRegion"},fetchData:function(){this.params=t.extend({},r.request.params,{where:"DATE_SCHEDULED>=date'"+l.get("startDate")+"' and DATE_SCHEDULED<=DATE'"+l.get("endDate")+"'"}),this.reqType="GET",""!==l.get("geometry")&&(this.params=t.extend(this.params,{geometryType:"esriGeometryPolygon",geometry:JSON.stringify({rings:[l.get("geometry").rings[0]],spatialReference:{wkid:2272}}),spatialRel:"esriSpatialRelContains"}),this.reqType="POST"),this.collection.fetch({data:this.params,type:this.reqType})},checkPageCount:function(t){t.state.currentPage===t.state.totalPages||null===t.state.totalPages?e(".btn-more").hide():e(".btn-more").is(":visible")||e(".btn-more").show()},setEndDate:function(e){var t=i.fullDate(e);return i.queryableDate(new Date(new Date(t).setMonth(t.getMonth()+6)))},render:function(){var e=u.toJSON();return this.$el.html(this.template({rcos:e})),this},onRender:function(){var t=this;e(".input-daterange .start-date")[0].value=i.friendlyDate(l.get("startDate")),e(".input-daterange .end-date")[0].value=i.friendlyDate(l.get("endDate")),l.get("regionType")&&e(".region-picker").selectpicker("val",l.get("regionType")+":"+l.get("regionValue")),e(".input-daterange .start-date").datepicker().on("changeDate",function(e){l.set("startDate",i.queryableDate(e.date)),t.fetchData()}),e(".input-daterange .end-date").datepicker().on("changeDate",function(e){l.set("endDate",i.queryableDate(e.date)),t.fetchData()})},addOne:function(t){var n=new o({model:t});e(".appeals-table").append(n.render().el),this.views.push(n)},resetAppeals:function(r){this.page=1,t.each(this.views,function(e){e.close()}),this.addAppeals(this.collection.getFirstPage()),this.page=this.page+1,this.checkPageCount(this.collection),e("#results-summary").empty().append(this.summaryView.render({count:r.length,startDate:i.friendlyDate(l.get("startDate")),endDate:i.friendlyDate(l.get("endDate")),regionType:i.friendlyRegionType(l.get("regionType")),regionValue:l.get("regionValue")||void 0})),this.route="/filter/"+l.get("startDate")+"/"+l.get("endDate"),""!==l.get("regionType")&&(this.route=this.route+"/"+l.get("regionType")+"/"+l.get("regionValue")),n.history.navigate(this.route)},addAppeals:function(e){var t=this;e.forEach(function(e){t.addOne(e)})},paginate:function(e){e.stopPropagation(),this.addAppeals(this.collection.getPage(this.page)),this.page=this.page+1},getGeometry:function(){""!==l.get("regionValue")?l.fetch():this.fetchData()},filterByRegion:function(t){t.stopPropagation(),"all"===e(".region-picker").val()?(l.set("regionType",""),l.set("regionValue",""),l.set("geometry","")):(l.set("regionType",e(".region-picker").val().split(":")[0]),l.set("regionValue",e(".region-picker").val().split(":")[1]),this.getGeometry())},close:function(){t.each(this.views,function(e){e.close()}),this.summaryView.remove(),this.undelegateEvents(),this.remove(),this.unbind()}});return p}),define("text!templates/decision.html",[],function(){return"<td><%= decision_datetime %></td>\n<td><%= decision %></td>\n<td><%= proviso %></td>"}),define("views/decision",["jquery","underscore","backbone","text!templates/decision.html"],function(e,t,n,i){var r=n.View.extend({template:t.template(i),tagName:"tr",initialize:function(e){this.model=e.model,this.render()},close:function(){this.remove(),this.unbind()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});return r}),define("text!templates/court-history.html",[],function(){return"<td><%= court_action_datetime %></td>\n<td><%= court_action %></td>\n<td><%= court_case_number %></td>\n<td><%= court_result %></td>\n"}),define("views/court-history",["jquery","underscore","backbone","text!templates/court-history.html"],function(e,t,n,i){var r=n.View.extend({template:t.template(i),tagName:"tr",initialize:function(e){this.model=e.model,this.render()},close:function(){this.remove(),this.unbind()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});return r}),define("text!templates/detail.html",[],function(){return'<p><a href="http://www.phila.gov/Pages/default.aspx">Phila</a> > <a href="http://www.phila.gov/li/Pages/default.aspx">L & I</a> > <a href="/zoning-appeals">Zoning Appeals</a> > <strong>Detail</strong></p>\n<h1>Zoning Appeals</h1>\n<p><strong><%= VIOLATION_ADDRESS %></strong> <span class="detail-appeal-no">#<%= APPEAL_NUM %></span></p>\n<div class="row">\n  <div class="col-md-8">\n  	<div class="panel panel-default">\n  		<div class="panel-heading">\n  			<h3 class="panel-title"><i class="fa fa-envelope"></i> Appeal</h3>\n  		</div>\n  		<div class="panel-body">\n  			<div class="row">\n  				<div class="col-md-6">\n  					<ul class="list-group">\n  						<li class="list-group-item list-group-item-label"><strong>ADDRESS</strong></li>\n  						<li class="list-group-item"><%= VIOLATION_ADDRESS %></li>\n  						<li class="list-group-item list-group-item-label"><strong>TYPE</strong></li>\n  						<li class="list-group-item"><%= TYPE %></li>\n  					</ul>\n  				</div>\n  				<div class="col-md-4">\n  					<ul class="list-group">\n  						<li class="list-group-item list-group-item-label"><strong>APPEAL #</strong></li>\n  						<li class="list-group-item"><%= APPEAL_NUM %></li>\n  						<li class="list-group-item list-group-item-label"><strong>PERMIT APPLICATION #</strong></li>\n  						<li class="list-group-item"><%= PERMIT_NO %></li>\n  					</ul>\n  				</div>\n  				<div class="col-md-12">\n  					<ul class="list-group">\n  						<li class="list-group-item list-group-item-label"><strong>APPLICATION DESCRIPTION</strong></li>\n  						<li class="list-group-item"><%= GROUNDS %></li>\n  						<li class="list-group-item list-group-item-label"><strong>PRIMARY APPLICANT</strong></li>\n  						<li class="list-group-item"><%= PRIMARY_APPLICANT %></li>\n  					</ul>\n  				</div>\n  			</div>\n  		</div>\n  	</div>\n  </div>\n 	<div class="col-md-4">\n  	<div class="panel panel-default">\n  		<div class="panel-heading">\n  			<h3 class="panel-title"><i class="fa fa-calendar"></i> Hearing</h3>\n  		</div>\n  		<div class="panel-body">\n  			<div class="row">\n  				<div class="col-md-10">\n  					<ul class="list-group">\n  						<li class="list-group-item list-group-item-label"><strong>DATE</strong></li>\n  						<li class="list-group-item"><%= DATE_SCHEDULED %></li>\n  						<li class="list-group-item list-group-item-label"><strong>TIME</strong></li>\n  						<li class="list-group-item"><%= TIME_SCHEDULED %></li>\n  						<li class="list-group-item list-group-item-label"><strong>ZONING BOARD OF ADJUSTMENT</strong></li>\n  						<li class="list-group-item">1515 Arch Street, 18th Floor<br />215-686-2429 or 215-686-2430</li>\n  					</ul>\n  				</div>\n  			</div>\n  		</div>\n  	</div>\n	</div>\n	<div class="col-md-4">\n		<a href="http://www.phila.gov/li/Pages/History.aspx?addressforhistory=<%= VIOLATION_ADDRESS %>" target="_new"><div class="well location-history"><strong>LOCATION HISTORY:</strong> <%= VIOLATION_ADDRESS %> <i class="fa fa-arrow-circle-right"></i></div></a>\n	</div>\n</div>\n<div class="row">\n	<div class="col-md-8">\n		<div class="panel panel-default">\n  		<div class="panel-heading">\n  			<h3 class="panel-title"><i class="fa fa-archive"></i> History</h3>\n  		</div>\n  		<div class="panel-body">\n  			<div class="row">\n          <div class="panel-group center-block" id="accordion">\n            <div class="panel panel-default">\n              <div class="panel-heading">\n                <h4 class="panel-title">\n                  <a data-toggle="collapse" data-parent="#accordion" href="#decision-history">\n                    DECISION HISTORY\n                  </a>\n                </h4>\n              </div>\n              <div id="decision-history" class="panel-collapse collapse">\n                <div class="panel-body decision-history-body">\n                  <table class="table table-striped decision-history-table">\n                    <tbody>\n                      <tr>\n                        <th>Date</th>\n                        <th>Decision</th>\n                        <th>Notes</th>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n            <div class="panel panel-default">\n              <div class="panel-heading">\n                <h4 class="panel-title">\n                  <a data-toggle="collapse" data-parent="#accordion" href="#court-history">\n                    COURT HISTORY\n                  </a>\n                </h4>\n              </div>\n              <div id="court-history" class="panel-collapse collapse">\n                <div class="panel-body court-history-body">\n                  <table class="table table-striped court-history-table">\n                    <tbody>\n                      <tr>\n                        <th>Date</th>\n                        <th>Court Action</th>\n                        <th>Case #</th>\n                        <th>Result</th>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n          </div>\n  		</div>\n  	</div>\n	</div>\n</div>\n	<div class="col-md-4 map-view">\n		<div class="panel panel-default">\n  		<div class="panel-body map-panel">\n  			<div id="map"></div>\n  		</div>\n  	</div>\n	</div>'}),define("text!templates/no-decision-history.html",[],function(){return"No decision history.\n"}),define("text!templates/no-court-history.html",[],function(){return"No court history."}),define("models/decision",["underscore","backbone"],function(e,t){var n=t.Model.extend();return n}),define("collections/decisions",["underscore","backbone","../config","../util","models/decision"],function(e,t,n,i,r){var o=t.Collection.extend({model:r,initialize:function(e){this.appealId=e.appealId},url:function(){return e.template(n.history.decision,{appealId:this.appealId})},parse:function(t){return t.d.results.length<1?void this.trigger("noDecisions",{status:404}):e.map(t.d.results,function(e){return e.decision_datetime=i.friendlyLIDate(e.decision_datetime),e})}});return o}),define("models/court-history",["underscore","backbone"],function(e,t){var n=t.Model.extend();return n}),define("collections/court-histories",["underscore","backbone","../config","../util","models/court-history"],function(e,t,n,i,r){var o=t.Collection.extend({model:r,initialize:function(e){this.appealId=e.appealId},url:function(){return e.template(n.history.court,{appealId:this.appealId})},parse:function(t){return t.d.results.length<1?void this.trigger("noHistory",{status:404}):e.map(t.d.results,function(e){return e.court_action_datetime=i.friendlyLIDate(e.court_action_datetime),e})}});return o}),define("views/detail",["jquery","underscore","backbone","../util","../views/decision","../views/court-history","text!templates/detail.html","text!templates/no-decision-history.html","text!templates/no-court-history.html","../models/current-appeal","../collections/decisions","../collections/court-histories"],function(e,t,n,i,r,o,a,s,l,c,u,p){var d=n.View.extend({template:t.template(a),title:"Appeal Details",initalize:function(){this.views=[]},close:function(){t.each(this.views,function(e){e.close()}),this.remove(),this.unbind()},render:function(){return this.$el.html(this.template(c.toJSON())),this},addDecision:function(t){var n=new r({model:t});e(".decision-history-table").append(n.render().el)},addCourtHistory:function(t){var n=new o({model:t});e(".court-history-table").append(n.render().el)},addDecisions:function(t){i.loading(!1);var n=this;t.forEach(function(e){n.addDecision(e)}),e("#decision-history").height("100%")},addCourtHistories:function(t){i.loading(!1);var n=this;t.forEach(function(e){n.addCourtHistory(e)}),e("#court-history").height("100%")},displayNoHistoryMessage:function(){i.loading(!1),e(".decision-history-body").html(t.template(s))},displayNoCourtHistoryMessage:function(){i.loading(!1),e(".court-history-body").html(t.template(l))},onRender:function(){var t=this;e("#decision-history").one("show.bs.collapse",function(e){e.stopPropagation(),t.decisionsCollection=new u({appealId:c.get("APPEAL_KEY")}),t.listenToOnce(t.decisionsCollection,"sync",t.addDecisions),t.listenToOnce(t.decisionsCollection,"noDecisions",t.displayNoHistoryMessage),t.listenToOnce(t.decisionsCollection,"request",function(){i.loading(!0)}),t.decisionsCollection.fetch({jsonp:"$callback"})}),e("#court-history").one("show.bs.collapse",function(e){e.stopPropagation(),t.courtHistoriesCollection=new p({appealId:c.get("APPEAL_KEY")}),t.listenToOnce(t.courtHistoriesCollection,"sync",t.addCourtHistories),t.listenToOnce(t.courtHistoriesCollection,"noHistory",t.displayNoCourtHistoryMessage),t.listenToOnce(t.courtHistoriesCollection,"request",function(){i.loading(!0)}),t.courtHistoriesCollection.fetch({jsonp:"$callback"})})}});return d}),define("text!templates/map.html",[],function(){return'<div id="map"></div>'}),define("views/map",["jquery","underscore","backbone","leaflet","../config","text!templates/map.html","../models/current-appeal"],function(e,t,n,i,r,o,a){var s=n.View.extend({template:t.template(o),render:function(){var t=[a.get("lat"),a.get("lng")],n=i.map(e("#map")[0]).setView(t,18);return i.tileLayer(r.basemap.basemap,{maxZoom:18,minZoom:11,attribution:"City of Philadelphia"}).addTo(n),i.tileLayer(r.basemap.labels,{maxZoom:18,minZoom:11,attribution:"City of Philadelphia"}).addTo(n),i.marker(t).addTo(n),n.setMaxBounds([[39.88023492849342,-75.29548645019531],[40.15211239398205,-75.29548645019531],[40.15211239398205,-74.88967895507812],[39.88023492849342,-74.88967895507812]]),this},close:function(){this.remove(),this.unbind()}});return s}),define("text!templates/appeal-not-found.html",[],function(){return'<p><a href="http://www.phila.gov/Pages/default.aspx">Phila</a> > <a href="http://www.phila.gov/li/Pages/default.aspx">L & I</a> > <a href="/zoning-appeals">Zoning Appeals</a> > <strong>Detail</strong></p>\n<h1>Appeal Not Found</h1>\n<h4>Sorry, we couldn\'t find the details for that appeal. Please check your appeal number and try again. If your appeal number is correct, the hearing occurred over a year ago and is no longer available to this application.</h4>'}),define("views/not-found-appeal",["jquery","underscore","backbone","text!templates/appeal-not-found.html"],function(e,t,n,i){var r=n.View.extend({template:t.template(i),tagName:"div",close:function(){this.remove(),this.unbind()},render:function(){return this.$el.html(this.template()),this}});return r}),define("text!templates/api-down.html",[],function(){return'<p><a href="http://www.phila.gov/Pages/default.aspx">Phila</a> > <a href="http://www.phila.gov/li/Pages/default.aspx">L & I</a> > <a href="/zoning-appeals">Zoning Appeals</a> > <strong>Detail</strong></p>\n<h1>Appeal Not Found</h1>\n<h4>Sorry, we couldn\'t find the details for that appeal. There is an issue with the application that will be fixed soon.</h4>'}),define("views/api-down",["jquery","underscore","backbone","text!templates/api-down.html"],function(e,t,n,i){var r=n.View.extend({template:t.template(i),tagName:"div",close:function(){this.remove(),this.unbind()},render:function(){return this.$el.html(this.template()),this}});return r}),define("router",["jquery","backbone","config","util","views/home","views/detail","views/map","views/not-found-appeal","views/api-down","models/current-appeal","collections/rcos","bootstrapSelect","bootstrapDatepicker"],function(e,t,n,i,r,o,a,s,l,c,u){var p=t.Router.extend({routes:{"appeals/:appealNum":"showAppeal","filter/:startDate/:endDate(/:regionType/:regionValue)":"filter","*path":"home"},showView:function(t){this.currentView&&(this.currentView.close(),"undefined"!=typeof this.mapView&&this.mapView.close()),e("#app").empty().append(t.render().el),document.title=void 0!==t.title&&t.title?t.title:e("title").text(),this.currentView=t,e(".selectpicker").selectpicker(),e(".input-daterange").datepicker({format:"mm/dd/yyyy",startDate:"-30d",endDate:"+"+n.defaults.monthsAhead+"m",todayBtn:!0,autoclose:!0,todayHighlight:!0})},home:function(t){var n=[],o=this,a=t||{};if(u.length<=0)i.loading(!0),n.push(u.fetch()),e.when.apply(e,n).always(function(){var e=new r(a);o.showView(e),e.onRender(),i.loading(!1)}).fail(function(){});else{var s=new r(a);o.showView(s),s.onRender()}},filter:function(e,t,n,i){var r={};r.startDate=e,r.endDate=t,r.regionType=n||void 0,r.regionValue=i||void 0,this.home(r)},showAppeal:function(t){var n=new o;if(this.mapView=new a,c.get("appealNum")===t)this.showView(n),n.onRender(),this.mapView.render();else{c.set("appealNum",t);var r=[],s=this;i.loading(!0),r.push(c.fetch()),e.when.apply(e,r).done(function(){c.get("appealNum")===t?(s.showView(n),n.onRender(),this.mapView.render(),i.loading(!1)):(s.showAppealNotFound(),i.loading(!1))}).fail(function(){s.showApiDown(),i.loading(!1)})}},showAppealNotFound:function(){var e=new s;this.showView(e)},showApiDown:function(){var e=new l;this.showView(e)}});return p}),requirejs.config({baseUrl:"scripts/",paths:{jquery:["//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min","../vendor/jquery/jquery"],backbone:["//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.0/backbone-min","../vendor/backbone/backbone"],underscore:["//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min","../vendor/underscore/underscore"],bootstrap:["//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap-wizard/1.0.0/js/bootstrap.min","../vendor/sass-bootstrap/dist/js/bootstrap"],bootstrapSelect:["//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.3.5/bootstrap-select.min","../vendor/bootstrap-select/bootstrap-select"],bootstrapDatepicker:["//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.min","../vendor/bootstrap-datepicker/js/bootstrap-datepicker"],text:"../vendor/requirejs-text/text",backbonePageable:["//cdnjs.cloudflare.com/ajax/libs/backbone-pageable/1.4.5/backbone-pageable","../vendor/backbone-pageable/lib/backbone-pageable"],leaflet:["//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.2/leaflet","../vendor/leaflet/dist/leaflet"],nprogress:["//cdnjs.cloudflare.com/ajax/libs/nprogress/0.1.2/nprogress.min","../vendor/nprogress/nprogress"]},shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},bootstrap:{deps:["jquery"],exports:"jquery"},bootstrapSelect:{deps:["bootstrap","jquery"],exports:"bootstrap-select"},bootstrapDatepicker:{deps:["bootstrap","jquery"],exports:"bootstrap-datepicker"},backbonePageable:{deps:["backbone"],exports:"backbone-pageable"},leaflet:{deps:["jquery"],exports:"L"},nprogress:{deps:["jquery"],exports:"NProgress"}}}),require(["jquery","backbone","router"],function(e,t,n){t.ajax=function(){return!e.support.cors&&arguments.length?(arguments[0].cache="true",arguments[0].timeout=15e3,arguments[0].dataType="jsonp",t.$.ajax.apply(t.$,arguments)):t.$.ajax.apply(t.$,arguments)},e(".navbar-toggle").click(function(){e(".navbar-collapse").toggle("in")}),new n,t.history.start()}),define("main",function(){});